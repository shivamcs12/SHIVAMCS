<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Shivam Online Services</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===== GLOBAL ===== */
body{ margin:0; font-family:Arial, sans-serif; background:#0f2027; }

/* ===== PASSCODE SCREEN ===== */
#lockScreen{
  position:fixed; inset:0; display:flex; justify-content:center; align-items:center;
  background:linear-gradient(135deg,#141e30,#243b55); z-index:1000;
}
.lock-box{
  background:#fff; padding:25px; width:300px; border-radius:16px;
  text-align:center; box-shadow:0 15px 40px rgba(0,0,0,.4);
}
.lock-box h2{margin:0 0 10px;}
.lock-box input{
  width:100%; padding:12px; text-align:center; font-size:18px;
  letter-spacing:4px; border-radius:10px; border:1px solid #ccc;
  box-sizing: border-box;
}
.lock-box button{
  width:100%; margin-top:15px; padding:12px; border:none;
  border-radius:10px; background:#1d2671; color:#fff; font-size:16px; cursor: pointer;
}
.error{ color:red; margin-top:8px; display:none; }

/* ===== LOADER ===== */
#loader{
  position:fixed; inset:0; display:none; justify-content:center; align-items:center;
  background:linear-gradient(135deg,#000428,#004e92); z-index:999;
}
.loader-box{ text-align:center; color:#fff; }
.spinner{
  width:70px; height:70px; border:6px solid rgba(255,255,255,.3);
  border-top:6px solid #00ffcc; border-radius:50%;
  animation:spin 1s linear infinite; margin:auto;
}
@keyframes spin{ 100%{transform:rotate(360deg);} }

/* ===== MAIN CONTAINER ===== */
.container{
  max-width:420px; margin:20px auto; background:#fff;
  padding:15px; border-radius:12px;
}
h1,h3{text-align:center;margin:6px 0;}
label{font-weight:bold;margin-top:10px;display:block;}
input,select,button{
  width:100%; padding:8px; margin-top:6px; box-sizing: border-box;
}
button{
  background:#1d2671; color:#fff; border:none; border-radius:6px; cursor: pointer; padding: 10px;
}
.print-btn{background:#0a7d2c; margin-bottom: 10px;}
.record-btn{background:#ff9800; margin-top: 15px;}
.back-btn{background:#555; margin-top: 10px;}

#receiptPage, #dashboardPage {display:none;}

/* ===== DASHBOARD STYLES ===== */
.stats-box {
    display: flex; justify-content: space-between; background: #eee;
    padding: 10px; border-radius: 8px; margin-bottom: 15px;
}
.stat-item { text-align: center; font-size: 12px; }
.stat-item b { display: block; font-size: 16px; color: #1d2671; }
.search-box { margin-bottom: 10px; }
.table-wrapper { overflow-x: auto; }
table { width: 100%; border-collapse: collapse; font-size: 12px; margin-top: 10px; white-space: nowrap; }
th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
th { background-color: #1d2671; color: white; position: sticky; top: 0; }
tr:nth-child(even) {background-color: #f2f2f2;}

/* ===== RECEIPT DESIGN ===== */
.receipt-box{ border:1px solid #000; padding:15px; margin-bottom:20px; position: relative; }
.header{ text-align:center; border-bottom:2px solid #000; padding-bottom: 10px; margin-bottom: 10px; }

.logo { max-width: 80px; display: block; margin: 0 auto 5px; }
.shop-name { font-size: 22px; margin: 5px 0; color: #1d2671; text-transform: uppercase; font-weight: 800; }
.tagline { font-size: 12px; font-style: italic; margin-top: -5px; margin-bottom: 5px; color: #555; font-weight: bold; }
.address-line { font-size: 12px; margin-bottom: 2px; }
.contact-line { font-size: 13px; font-weight: bold; margin-bottom: 5px; }

.copy-title{ text-align:center; font-weight:bold; background:#eee; margin:6px 0; border: 1px solid #ddd; font-size: 12px; }
.row{ display:flex; justify-content:space-between; font-size:14px; margin-bottom: 4px; }
.amount{ border-top:1px dashed #000; margin-top:8px; padding-top:8px; }
.cut{ border-top:2px dashed #000; margin:25px 0; }
.receipt-id { font-weight: bold; font-family: monospace; }

/* TERMS SECTION UPDATED */
.terms-box {
    margin-top: 15px;
    border-top: 1px solid #000;
    padding-top: 5px;
    font-size: 10px;
    text-align: left;
}
.terms-box b { text-decoration: underline; font-size: 11px; }
.terms-box ul { margin: 5px 0; padding-left: 15px; }
.terms-box li { margin-bottom: 6px; line-height: 1.3; } 
.hindi-text { font-size: 9px; font-weight: normal; display: block; margin-top: 1px; color: #333; } 

.thank-you { text-align: center; font-weight: bold; margin-top: 10px; font-size: 12px; }

/* ===== PRINT ===== */
@media print{
  body *{visibility:hidden;}
  #printArea,#printArea *{visibility:visible;}
  #printArea{ position:absolute; left:0; top:0; width:100%; }
  button{display:none;}
}
</style>
</head>

<body>

<div id="lockScreen">
  <div class="lock-box">
    <h2>üîê Secure Entry</h2>
    <p>Enter Passcode</p>
    <input type="password" id="passcode" onkeyup="checkEnter(event)">
    <button onclick="unlock()">ENTER</button>
    <div class="error" id="error">Wrong Passcode ‚ùå</div>
  </div>
</div>

<div id="loader">
  <div class="loader-box">
    <div class="spinner"></div>
    <p>Loading System...</p>
  </div>
</div>

<div class="container" id="formPage">
  <h1>Shivam Online Services</h1>
  <p style="text-align:center; margin-top:-10px; color:#666;">Your Digital Partner</p>

  <label>Customer Name</label>
  <input id="custName">

  <label>Mobile Number</label>
  <input id="mobile" type="number">

  <label>Service</label>
  <input id="service">

  <label>Total Amount</label>
  <input type="number" id="total" oninput="calcPending()">

  <label>Paid Amount</label>
  <input type="number" id="paid" oninput="calcPending()">

  <label>Pending Amount</label>
  <input type="number" id="pending" readonly>

  <label>Payment Mode</label>
  <select id="mode">
    <option>Cash</option>
    <option>Online</option>
  </select>

  <button onclick="generateReceipt()">Generate Receipt & Save</button>
  <button class="record-btn" onclick="openDashboard()">üìä View Records / Hisaab</button>
</div>

<div class="container" id="dashboardPage">
  <h1>Daily Report</h1>
  <div class="stats-box">
      <div class="stat-item"><b><span id="d_cust">0</span></b>Customers</div>
      <div class="stat-item"><b>‚Çπ<span id="d_income">0</span></b>Income</div>
      <div class="stat-item"><b>‚Çπ<span id="d_pending">0</span></b>Pending</div>
  </div>
  <div class="search-box">
      <input type="text" id="searchInput" placeholder="Search..." onkeyup="searchData()">
  </div>
  <div class="table-wrapper">
      <table id="dataTable">
          <thead>
              <tr>
                  <th>ID</th><th>Name</th><th>Mobile</th><th>Service</th>
                  <th>Total</th><th>Paid</th><th>Pending</th><th>Date</th>
              </tr>
          </thead>
          <tbody id="tableBody"></tbody>
      </table>
  </div>
  <button class="back-btn" onclick="closeDashboard()">‚¨Ö Back to Form</button>
</div>

<div class="container" id="receiptPage">
  <div id="printArea">
    
    <div class="receipt-box">
      <div class="header">
        <img src="shivamonline.jpg" alt="shivam online" class="logo">
        <h2 class="shop-name">Shivam Online Services</h2>
        <p class="tagline">Your Digital Partner</p>
        <div class="address-line">Jaipur, Rajasthan</div>
        <div class="contact-line">Mob: 8875761835</div>
      </div>
      
      <div class="copy-title">Customer Copy</div>
      
      <div class="row"><b>Receipt No:</b><span class="receipt-id" id="rid1"></span></div>
      <div class="row" style="margin-bottom:5px;"><small>Date: <span id="rdate1"></span> | <span id="rtime1"></span></small></div>

      <div class="row"><span>Name</span><span id="rname1"></span></div>
      <div class="row"><span>Mobile</span><span id="rmobile1"></span></div>
      <div class="row"><span>Service</span><span id="rservice1"></span></div>
      
      <div class="amount">
        <div class="row"><b>Total Amount</b><b>‚Çπ<span id="rtotal1"></span></b></div>
        <div class="row"><span>Paid Amount</span><span>‚Çπ<span id="rpaid1"></span></span></div>
        <div class="row"><span>Pending</span><span>‚Çπ<span id="rpending1"></span></span></div>
      </div>

      <div class="terms-box">
          <b>Terms & Conditions / ‡§®‡§ø‡§Ø‡§Æ ‡§µ ‡§∂‡§∞‡•ç‡§§‡•á‡§Ç:</b>
          <ul>
              <li>
                  Recharge, Bill, Loan/Card Repayment & Online Services are non-refundable.
                  <span class="hindi-text">‡§∞‡§ø‡§ö‡§æ‡§∞‡•ç‡§ú, ‡§¨‡§ø‡§≤, ‡§≤‡•ã‡§®/‡§ï‡•ç‡§∞‡•á‡§°‡§ø‡§ü ‡§ï‡§æ‡§∞‡•ç‡§° ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§∞‡§ø‡§´‡§Ç‡§° ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§Ç‡§ó‡•Ä‡•§</span>
              </li>
              <li>
                  Please check Mobile No. & ID before payment.
                  <span class="hindi-text">‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§Ö‡§™‡§®‡§æ ‡§®‡§Ç‡§¨‡§∞ ‡§î‡§∞ ID ‡§ö‡•á‡§ï ‡§ï‡§∞ ‡§≤‡•á‡§Ç‡•§</span>
              </li>
              <li>
                  Duplicate receipt will not be issued if lost.
                  <span class="hindi-text">‡§∞‡§∏‡•Ä‡§¶ ‡§ñ‡•ã ‡§ú‡§æ‡§®‡•á ‡§™‡§∞ ‡§¶‡•Ç‡§∏‡§∞‡•Ä ‡§∞‡§∏‡•Ä‡§¶ ‡§®‡§π‡•Ä‡§Ç ‡§¶‡•Ä ‡§ú‡§æ‡§è‡§ó‡•Ä‡•§</span>
              </li>
              <li>
                  Verify details by visiting Shivam Online Services.
                  <span class="hindi-text">‡§Ü‡§™ ‡§∂‡§ø‡§µ‡§Æ ‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏‡•á‡§ú ‡§™‡§∞ ‡§ú‡§æ‡§ï‡§∞ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ö‡•á‡§ï ‡§ï‡§∞‡§µ‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§</span>
              </li>
              <li>
                  As per Shivam Online Services rules.
                  <span class="hindi-text">‡§∂‡§ø‡§µ‡§Æ ‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏‡•á‡§ú ‡§ï‡•á ‡§®‡§ø‡§Ø‡§Æ‡•ã‡§Ç ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞‡•§</span>
              </li>
          </ul>
          <div class="thank-you">Thank You! Visit Again.</div>
      </div>
    </div>

    <div class="cut">--- Cut Here ---</div>

    <div class="receipt-box">
      <div class="header">
        <img src="shivamonline.jpg" alt="[LOGO]" class="logo">
        <h2 class="shop-name">Shivam Online Services</h2>
        <p class="tagline">Your Digital Partner</p>
        <div class="address-line">Jaipur, Rajasthan</div>
        <div class="contact-line">Mob: 8875761835</div>
      </div>
      
      <div class="copy-title">Office Copy</div>
      
      <div class="row"><b>Receipt No:</b><span class="receipt-id" id="rid2"></span></div>
      <div class="row" style="margin-bottom:5px;"><small>Date: <span id="rdate2"></span> | <span id="rtime2"></span></small></div>

      <div class="row"><span>Name</span><span id="rname2"></span></div>
      <div class="row"><span>Mobile</span><span id="rmobile2"></span></div>
      <div class="row"><span>Service</span><span id="rservice2"></span></div>
      
      <div class="amount">
        <div class="row"><b>Total Amount</b><b>‚Çπ<span id="rtotal2"></span></b></div>
        <div class="row"><span>Paid Amount</span><span>‚Çπ<span id="rpaid2"></span></span></div>
        <div class="row"><span>Pending</span><span>‚Çπ<span id="rpending2"></span></span></div>
      </div>

      <div class="terms-box">
        <b>Terms & Conditions / ‡§®‡§ø‡§Ø‡§Æ ‡§µ ‡§∂‡§∞‡•ç‡§§‡•á‡§Ç:</b>
        <ul>
            <li>
                Recharge, Bill, Loan/Card Repayment & Online Services are non-refundable.
                <span class="hindi-text">‡§∞‡§ø‡§ö‡§æ‡§∞‡•ç‡§ú, ‡§¨‡§ø‡§≤, ‡§≤‡•ã‡§®/‡§ï‡•ç‡§∞‡•á‡§°‡§ø‡§ü ‡§ï‡§æ‡§∞‡•ç‡§° ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§∞‡§ø‡§´‡§Ç‡§° ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§Ç‡§ó‡•Ä‡•§</span>
            </li>
            <li>
                Duplicate receipt will not be issued if lost.
                <span class="hindi-text">‡§∞‡§∏‡•Ä‡§¶ ‡§ñ‡•ã ‡§ú‡§æ‡§®‡•á ‡§™‡§∞ ‡§¶‡•Ç‡§∏‡§∞‡•Ä ‡§∞‡§∏‡•Ä‡§¶ ‡§®‡§π‡•Ä‡§Ç ‡§¶‡•Ä ‡§ú‡§æ‡§è‡§ó‡•Ä‡•§</span>
            </li>
            <li>
                As per Shivam Online Services rules.
                <span class="hindi-text">‡§∂‡§ø‡§µ‡§Æ ‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏‡•á‡§ú ‡§ï‡•á ‡§®‡§ø‡§Ø‡§Æ‡•ã‡§Ç ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞‡•§</span>
            </li>
        </ul>
      </div>
    </div>

  </div>

  <button class="print-btn" onclick="window.print()">üñ®Ô∏è Print Receipt</button>
  <button class="back-btn" onclick="location.reload()">üîÑ New Entry</button>
</div>

<script>
const PASSCODE = "38765700";

// Enter Key Logic
function checkEnter(event) { if (event.key === "Enter") unlock(); }

function unlock(){
  const passInp = document.getElementById("passcode");
  const errDiv = document.getElementById("error");
  if(passInp.value === PASSCODE){
    errDiv.style.display="none";
    document.getElementById("lockScreen").style.display="none";
    document.getElementById("loader").style.display="flex";
    setTimeout(()=>{ document.getElementById("loader").style.display="none"; }, 1500);
  }else{ errDiv.style.display="block"; }
}

function calcPending(){
  const total = document.getElementById("total").value;
  const paid = document.getElementById("paid").value;
  document.getElementById("pending").value = (Number(total||0) - Number(paid||0));
}

function saveRecord(data) {
    let records = JSON.parse(localStorage.getItem("emitra_records")) || [];
    records.push(data);
    localStorage.setItem("emitra_records", JSON.stringify(records));
}

function generateReceipt(){
  const name = document.getElementById("custName").value;
  const mob = document.getElementById("mobile").value;
  const srv = document.getElementById("service").value;
  const tot = document.getElementById("total").value;
  const pd = document.getElementById("paid").value;
  const pnd = document.getElementById("pending").value;
  
  const dateStr = new Date().toLocaleDateString('en-IN');
  const timeStr = new Date().toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit', hour12: true });
  const uniqueID = "#SOS-" + Math.floor(100000 + Math.random() * 900000); 

  if(!name || !tot) { alert("Please fill Name and Amount!"); return; }

  const dataObj = {
      id: uniqueID, name: name, mobile: mob, service: srv,
      total: tot, paid: pd, pending: pnd,
      date: dateStr, time: timeStr, timestamp: new Date().getTime()
  };
  saveRecord(dataObj);

  // Fill Data in Both Receipts
  document.getElementById("rid1").innerText=uniqueID; document.getElementById("rid2").innerText=uniqueID;
  document.getElementById("rdate1").innerText=dateStr; document.getElementById("rdate2").innerText=dateStr;
  document.getElementById("rtime1").innerText=timeStr; document.getElementById("rtime2").innerText=timeStr;
  document.getElementById("rname1").innerText=name; document.getElementById("rname2").innerText=name;
  document.getElementById("rmobile1").innerText=mob; document.getElementById("rmobile2").innerText=mob;
  document.getElementById("rservice1").innerText=srv; document.getElementById("rservice2").innerText=srv;
  document.getElementById("rtotal1").innerText=tot; document.getElementById("rtotal2").innerText=tot;
  document.getElementById("rpaid1").innerText=pd; document.getElementById("rpaid2").innerText=pd;
  document.getElementById("rpending1").innerText=pnd; document.getElementById("rpending2").innerText=pnd;
  
  document.getElementById("formPage").style.display="none";
  document.getElementById("receiptPage").style.display="block";
}

function openDashboard() {
    document.getElementById("formPage").style.display="none";
    document.getElementById("dashboardPage").style.display="block";
    loadData();
}

function closeDashboard() {
    document.getElementById("dashboardPage").style.display="none";
    document.getElementById("formPage").style.display="block";
}

function loadData() {
    let records = JSON.parse(localStorage.getItem("emitra_records")) || [];
    records.sort((a, b) => b.timestamp - a.timestamp);
    renderTable(records);
    calculateTodayStats(records);
}

function calculateTodayStats(records) {
    const todayStr = new Date().toLocaleDateString('en-IN');
    let custCount = 0; let income = 0; let pending = 0;
    records.forEach(rec => {
        if(rec.date === todayStr) {
            custCount++; income += Number(rec.paid || 0); pending += Number(rec.pending || 0);
        }
    });
    document.getElementById("d_cust").innerText = custCount;
    document.getElementById("d_income").innerText = income;
    document.getElementById("d_pending").innerText = pending;
}

function renderTable(data) {
    const tbody = document.getElementById("tableBody");
    tbody.innerHTML = "";
    data.forEach(rec => {
        const row = `<tr>
            <td style="font-weight:bold">${rec.id||'-'}</td>
            <td>${rec.name}</td><td>${rec.mobile}</td><td>${rec.service}</td>
            <td>${rec.total}</td><td style="color:green">${rec.paid}</td>
            <td style="color:${rec.pending > 0 ? 'red' : 'green'}; font-weight:bold">${rec.pending}</td>
            <td>${rec.date} <small>${rec.time||''}</small></td>
        </tr>`;
        tbody.innerHTML += row;
    });
}

function searchData() {
    const query = document.getElementById("searchInput").value.toLowerCase();
    let records = JSON.parse(localStorage.getItem("emitra_records")) || [];
    const filtered = records.filter(rec => 
        rec.name.toLowerCase().includes(query) || 
        rec.mobile.includes(query) ||
        (rec.id && rec.id.toLowerCase().includes(query))
    );
    renderTable(filtered);
}
</script>

</body>
</html>
